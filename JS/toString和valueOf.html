<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>toString和valueOf</title>
    <script type="text/javascript">
        /*
         * 在一些情况下我们会把对象转换为基本类型,对于转换为布尔值规则很简单,所有的对象都会转换为 true
         * 然而我们最常用的是把对象转换为字符串或数字，这就比较麻烦了
         *
         * 对象转为字符串:
         *   对象转换为字符串过程大概是这样
         *
         *   如果对象具有 toString 方法则调用该方法,如果方法返回的是一个基本类型
         *   JavaScript 把这个值转换为字符串返回
         *   如果对象没有 toString 方法,或者该方法返回的不是一个基本类型,那么就会调用valueOf方法
         *   如果存在 valueOf 方法并且 valueOf 返回的是基本类型,那么将值转换为字符串输出
         *   再如果就只能报错了
         *
         * 对象转为数字:
         *   对象转换为数字过程大概是这样
         *
         *   如果对象有 valueOf 方法,并且方法返回基本类型,则把值转换为数字返回
         *   如果对象具有 toString 方法,且方法返回基本类型,则转换为数字返回
         *   否则就报错
         *   上面情况只是针对强制转换,也就是我们显示的调用 String 或者 Number 构造函数的时候的处理
         *
         *
         *   在平常使用中,在"显示"相关操作中会优先调用 toString 方法,而在运算相关操作中会优先调用 valueOf 方法
         *
         * */
        var o = {
            x: 8,
            valueOf: function () {
                return this.x + 2;
            },
            toString: function () {
                return this.x;
            }
        };
        console.log(String(o)); // "8"
        console.log(Number(o)); // 10
        console.log(o + 1);  // 11 运算相关
        alert(o); //"8" 显现相关

    </script>
</head>
<body>

</body>
</html>
